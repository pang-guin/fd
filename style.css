@font-face {
    font-family: 'BMHANNAAir';
    src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.0/BMHANNAAir.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

/* 기본 설정 */
* { box-sizing: border-box; font-family: 'BMHANNAAir', sans-serif; }

body {
    font-family: 'BMHANNAAir', sans-serif;
    font-size: 1.1rem;
    margin: 0;
    padding: 20px;
    background-color: #e4d8ec;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
}


.container {
    background-color: #fff;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 700px; /* 스마트폰 화면 크기 고려 */
    text-align: center;
}

/* 헤더 및 진행률 바 */
header h1 { font-size: 1.5rem; color: #333; margin-bottom: 20px; }
.progress-bar-container {
    width: 100%;
    height: 10px;
    background-color: #e9ecef;
    border-radius: 5px;
    overflow: hidden;
    margin-bottom: 30px;
}
.progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #8b5cf6 0%, #d946ef 100%);
    transition: width 0.5s ease-in-out;
}

/* 섹션(단계) 숨김/표시 처리 */
.step { display: none; animation: fadeIn 0.5s ease-in-out; }
.step.active { display: block; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* 섹션 1: 인트로 */
.intro-box h2 { color: #6f00ff; margin-bottom: 15px; }
.intro-box p { color: #666; line-height: 1.6; margin-bottom: 30px; }
.start-btn {
    padding: 15px 50px;
    font-size: 1.2rem;
    background: linear-gradient(90deg, #b778ea 0%, #830093 100%);
    border-radius: 30px;
    color: white; 
    border: none; 
    cursor: pointer;  
    position: relative; 
    overflow: hidden;  
    box-shadow: 0 5px 15px rgba(131, 0, 147, 0.4);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.start-btn:hover { 
    background-color: #ab54ea;
    transform: translateY(-3px); 
    box-shadow: 0 8px 25px rgba(131, 0, 147, 0.6);
}

/* --- 메인 로고 스타일 --- */
.intro-logo {
    display: block;       /* 블록 요소로 변경하여 중앙 정렬 가능하게 함 */
    width: 100%;          /* 반응형: 부모 너비에 맞춤 */
    max-width: 220px;     /* 너무 커지지 않도록 최대 너비 제한 (적절히 조절 가능) */
    height: auto;         /* 비율 유지 */
    margin: 0 auto 20px auto; /* 상우하좌: 아래쪽 여백 20px, 좌우 중앙 정렬 */
    animation: floatLogo 3s ease-in-out infinite; /* 둥둥 떠다니는 효과 (선택사항) */
}



/* (선택사항) 로고가 둥둥 떠다니는 애니메이션 */
@keyframes floatLogo {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
}


/* 섹션 2: 숨은 그림 찾기 게임 */
.step-header { margin-bottom: 20px; }
.step-header h2 { color: #333; }
.step-header p { color: #555; font-size: 0.95rem; }

.game-container { display: flex; justify-content: center; margin-bottom: 20px; }
.image-wrapper {
    position: relative;
    width: 100%;
    max-width: 400px; /* 이미지 크기 조절 */
}
.game-bg { width: 100%; height: auto; border-radius: 1px; display: block; }

/* 클릭 타겟 영역 및 정답 표시 */
.target-area {
    position: absolute;
    /* background-color: rgba(255, 0, 0, 0.2);  디버깅용 (위치 확인할 때 주석 해제) */
    cursor: pointer;
}
/* 찾았을 때 표시되는 빨간 동그라미 */
.target-area.found::after {
    content: '';
    position: absolute;
    top: -5px; left: -5px; right: -5px; bottom: -5px;
    border: 2px solid #ff3b3b;
    border-radius: 50%; /* 타원형 테두리 */
    animation: pulse 1.5s infinite;
    box-shadow: 0 0 10px #ff3b3b;
}
@keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.7; }
    100% { transform: scale(1); opacity: 1; }
}

/* 체크리스트 스타일 */
.checklist-box {
    background-color: #ffffff;
    padding: 15px;
    border-radius: 10px;
    text-align: center; /* 텍스트 가운데 정렬 */
}

.checklist-box h3 { 
    margin: 0 0 15px 0; 
    font-size: 1rem; 
    color: #333; 
}

.checklist { 
    list-style: none; 
    padding: 0; 
    margin: 0;
    
    /* 가로 배치를 위한 핵심 코드 */
    display: flex;       
    flex-wrap: wrap;     /* 공간이 부족하면 다음 줄로 자동 내림 */
    justify-content: center; /* 가운데 정렬 */
    gap: 8px;            /* 아이템 사이 간격 */
}

.checklist li {
    /* 기존 세로줄 제거 및 박스 스타일 적용 */
    border-bottom: none; 
    background-color: #ffffff;
    border: 1px solid #dfe6ed;
    border-radius: 20px; /* 둥근 캡슐 모양 */
    padding: 6px 12px;
    font-size: 0.9rem;
    color: #495057;
    
    display: flex;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* 살짝 입체감 */
    transition: all 0.2s;
}

.checklist li::before { 
    content: '☐'; 
    margin-right: 6px; 
    font-size: 0.8rem;
}

/* 찾은 항목 스타일 */
.checklist li.checked { 
    color: #adb5bd; 
    text-decoration: line-through; 
    background-color: #e9ecef; /* 찾으면 회색 배경 */
    border-color: #e9ecef;
}

.checklist li.checked::before { 
    content: '☑'; 
}

/* 다음 버튼 (숨김 상태) */
.next-btn {
    margin-top: 25px;
    padding: 12px 25px;
    background: linear-gradient(90deg, #0ab2d7 0%, #009336 100%);
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1.1rem;
    transition: all 0.3s;
}
.next-btn:hover {transform: scale(1.05); }
.next-btn.hidden { display: none; }

/* --- STEP 2: 단어 고르기 게임 스타일 --- */
.words-wrapper {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin: 30px 0;
}

.word-btn {
    padding: 15px 25px;
    font-size: 1.1rem;
    border: 2px solid #d493ec;
    background-color: white;
    color: #390876;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
    outline: none;
}

.word-btn:hover {
    background-color: #e7f1ff;
}

/* 정답(개인정보) 선택 시 효과: 커짐 + 반짝임 */
.word-btn.correct-active {
    background: linear-gradient(90deg, #0ab2d7 0%, #170682 100%);
    color: white;
    transform: scale(1.15);
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.6);
    border-color: #007bff;
    pointer-events: none; /* 다시 클릭 방지 */
}

/* 오답(날씨 등) 선택 시 효과: 작아짐 */
.word-btn.wrong-shrink {
    transform: scale(0.8);
    opacity: 0.5;
    background-color: #f8d7da;
    border-color: #dc3545;
    color: #721c24;
}

/* 설명 박스 스타일 */
.summary-box {
    background-color: #e3f2fd;
    border: 2px solid #90caf9;
    border-radius: 15px;
    padding: 20px;
    margin-top: 20px;
    animation: slideUp 0.5s ease-out;
}
.highlight-text {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #0d47a1;
}
.hidden { display: none; }
@keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* --- STEP 3: OX 퀴즈 스타일 --- */
.ox-quiz-container {
    text-align: left;
    max-width: 600px;
    margin: 0 auto;
}

.quiz-item {
    background-color: white;
    border: 1px solid #dfe6ed;
    border-radius: 10px;
    padding: 15px;
    margin-bottom: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.quiz-text {
    font-size: 1rem;
    margin: 0 0 10px 0;
    font-weight: 500;
}

.ox-btns {
    display: flex;
    gap: 10px;
}

.o-btn, .x-btn {
    flex: 1;
    padding: 10px;
    font-size: 1.2rem;
    font-weight: bold;
    border: 1px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s;
}

.o-btn { color: #28a745; background: #fff; }
.x-btn { color: #dc3545; background: #fff; }

.o-btn:hover { background-color: #e6f9ec; }
.x-btn:hover { background-color: #fce8ea; }

/* 퀴즈 정답/오답 스타일 */
.o-btn.selected, .x-btn.selected {
    color: white;
}
.o-btn.selected { background-color: #28a745; border-color: #28a745; }
.x-btn.selected { background-color: #dc3545; border-color: #dc3545; }
.btn-disabled { opacity: 0.5; pointer-events: none; }

.quiz-feedback {
    margin-top: 10px;
    font-size: 0.95rem;
    padding: 10px;
    border-radius: 5px;
    background-color: #f8f9fa;
    font-weight: bold;
}
.quiz-feedback.correct { color: #28a745; border-left: 4px solid #28a745; }
.quiz-feedback.wrong { color: #dc3545; border-left: 4px solid #dc3545; }

/* --- STEP 4: 예방 습관 (카드) 스타일 --- */
.habit-card-container {
    display: flex;
    justify-content: center;
    perspective: 1000px;
}
.habit-card {
    background: white;
    width: 300px;
    padding: 30px 20px;
    border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
    animation: slideInRight 0.5s ease-out;
}
@keyframes slideInRight {
    from { opacity: 0; transform: translateX(50px); }
    to { opacity: 1; transform: translateX(0); }
}
.habit-img-box {
    font-size: 3rem;
    margin-bottom: 20px;
    background-color: #f1f3f5;
    width: 80px;
    height: 80px;
    line-height: 80px;
    border-radius: 50%;
    margin-left: auto;
    margin-right: auto;
}
.habit-text {
    font-size: 1.1rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 25px;
    word-break: keep-all;
}
/* --- 기존 디자인 + 애니메이션 기능 합치기 --- */
.habit-check-label {
    display: block;
    cursor: pointer;
    background: linear-gradient(90deg, #0ab2d7 0%, #9f43fb 100%);
    color: white;
    padding: 12px;
    border-radius: 10px;
    margin-top: 15px;
    opacity: 0;                    
    transform: translateY(20px);    
    pointer-events: none;             
    transition: all 0.1s ease-out;  
}

.habit-check-label:hover { 
    opacity: 0.9; 
}

.habit-check-label input { 
    display: none; 
}

.habit-check-label.visible {
    opacity: 1;                     
    transform: translateY(0);     
    pointer-events: auto;         
}

/* 습관 완료 후 그리드 뷰 */
.habit-summary { text-align: center; }
.habit-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
}
.mini-habit-card {
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 10px;
    width: 130px; /* 작은 사이즈 */
    padding: 10px;
    font-size: 0.8rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    animation: popUp 0.5s ease;
}
.summary-message {
    font-size: 1.2rem;
    color: #007bff;
    font-weight: bold;
    margin-top: 20px;
}


/* --- STEP 5: 매칭 게임 스타일  --- */
/* --- STEP 5: 매칭 게임 스타일 (화살표 모양 적용됨) --- */
.matching-game-container {
    display: flex;
    justify-content: space-between;
    gap: 40px; /* 화살표 사이 간격을 위해 조금 더 넓힘 */
    margin-top: 20px;
    padding: 10px;
}

.match-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 15px; /* 버튼 사이 간격 */
}

.match-btn {
    padding: 15px;
    background: white;
    /* border: 2px solid ... (삭제: clip-path 사용 시 테두리는 filter로 대체) */
    /* border-radius: 10px; (삭제: 화살표는 각진 모양이 어울림) */
    
    cursor: pointer;
    text-align: center; /* 화살표 중앙 정렬 */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.95rem;
    transition: all 0.2s;
    word-break: keep-all;
    min-height: 60px;
    
    /* [핵심] 테두리 대신 그림자로 윤곽선 효과 */
    filter: drop-shadow(0 0 1px #adb5bd); 
}

/* --- 왼쪽 열: 오른쪽을 가리키는 화살표 --- */
#matchLeftCol .match-btn {
    /* 0~90%는 네모, 나머지 10%는 뾰족하게 */
    clip-path: polygon(0% 0%, 90% 0%, 100% 50%, 90% 100%, 0% 100%);
    padding-right: 30px; /* 텍스트가 뾰족한 곳에 닿지 않게 */
    text-align: right;   /* 텍스트를 화살표 방향으로 정렬 (선택사항) */
    justify-content: flex-end;
}

/* --- 오른쪽 열: 왼쪽을 가리키는 화살표 --- */
#matchRightCol .match-btn {
    /* 앞쪽 10%는 뾰족하게, 나머지는 네모 */
    clip-path: polygon(10% 0%, 100% 0%, 100% 100%, 10% 100%, 0% 50%);
    padding-left: 30px; /* 텍스트가 뾰족한 곳에 닿지 않게 */
    text-align: left;
    justify-content: flex-start;
}


/* 마우스 오버 */
.match-btn:hover {
    background-color: #f8f9fa;
    filter: drop-shadow(0 0 2px #495057); /* 진한 회색 그림자 */
    transform: scale(1.02);
}

/* 선택된 상태 */
.match-btn.selected {
    background-color: #e7f1ff; /* 배경색 유지 */
    color: #004085;
    /* 파란색 윤곽선 효과 */
    filter: drop-shadow(0 0 2px #007bff);
    transform: scale(1.02);
}

/* 정답 매칭 상태 (3D + 연보라) */
.match-btn.matched {
    background-color: #f3f0ff; /* 배경색 유지 */
    color: #5f3dc4;
    font-weight: bold;
    pointer-events: none; /* 클릭 불가 */
    
    /* [핵심] 기존 box-shadow 3D 효과를 drop-shadow로 변환 */
    /* 아래로 5px 떨어진 보라색 그림자로 입체감 표현 */
    filter: drop-shadow(0 5px 0 #b197fc); 
    
    transform: translateY(-5px); /* 위로 살짝 올라가며 입체감 완성 */
    z-index: 1; /* 다른 요소보다 위에 보이게 */
}

/* 오답 흔들림 */
.shake { 
    animation: shake 0.4s; 
    color: #fa5252;
    /* 빨간색 경고 효과 */
    filter: drop-shadow(0 0 2px #fa5252);
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
}

/* --- STEP 6: 최종 퀴즈 스타일 --- */
.final-quiz-container { max-width: 500px; margin: 0 auto; }
.quiz-status { font-size: 0.9rem; color: #868e96; margin-bottom: 10px; text-align: right; }
.final-question-box {
    background-color: #f8f9fa;
    padding: 20px;
    border-radius: 15px;
    margin-bottom: 20px;
    font-weight: bold;
    font-size: 1.1rem;
}
.final-options { display: flex; flex-direction: column; gap: 10px; }
.option-btn {
    padding: 15px;
    border: 1px solid #ced4da;
    border-radius: 10px;
    background: white;
    cursor: pointer;
    text-align: left;
    transition: all 0.2s;
}
.option-btn:hover { background-color: #f1f3f5; }
.option-btn.correct { background-color: #d4edda; border-color: #28a745; color: #155724; }
.option-btn.wrong { background-color: #f8d7da; border-color: #dc3545; color: #721c24; }


/* --- STEP 7: 엔딩 스타일 --- */
.ending-box { text-align: center; padding: 40px 20px; }
.confetti { font-size: 4rem; margin-bottom: 20px; animation: spin 2s infinite linear; }
.ending-msg { font-size: 1.2rem; margin: 20px 0; line-height: 1.6; color: #495057; }
.badge-box {
    display: inline-block;
    padding: 15px 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    font-size: 1.5rem;
    font-weight: bold;
    border-radius: 50px;
    box-shadow: 0 10px 20px rgba(118, 75, 162, 0.4);
    margin: 30px 0;
    animation: pulseBadge 2s infinite;
}
.promise-text {
    font-style: italic;
    color: #868e96;
    margin-bottom: 40px;
}
.restart-btn {
    padding: 10px 20px;
    border: 1px solid #ced4da;
    background: white;
    border-radius: 20px;
    cursor: pointer;
}
@keyframes pulseBadge {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

#sparkling-confetti {
    font-size: 80px;
    animation: sparkleRotate 3s ease-in-out infinite;
    margin-bottom: 20px;
    filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
}

.step.fade-out {
    animation: fadeOut 1.5s ease-in-out forwards; /* 1초 동안 사라짐 */
    pointer-events: none; /* 사라지는 동안 클릭 방지 */
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

#sparkling-confetti {
    font-size: 80px;
    margin-bottom: 20px;
    filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.8));
    animation: sparkleRotate 2s ease-in-out infinite;
}


@keyframes sparkleRotate {
    0% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-15deg); }
    50% { transform: scale(1.2) rotate(15deg); }
    75% { transform: scale(1.1) rotate(-15deg); }
    100% { transform: scale(1) rotate(0deg); }
}
